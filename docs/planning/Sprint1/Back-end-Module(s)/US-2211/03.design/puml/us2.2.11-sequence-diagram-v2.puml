@startuml
actor "Logistics Operator" as Operator
boundary "UI" as UI
boundary "RegisterStaffController" as Controller
control "StaffMemberAppService" as Service
entity "StaffMemberRepository" as Repository
collections "Audit Log" as Audit

Operator -> UI : Request StaffMember data for update
UI -> Controller : GetStaffMemberById(id)
Controller -> Service : GetStaffMemberById(id)
Service -> Repository : FindById(id)
Repository --> Service : StaffMember entity
Service --> Controller : StaffMemberDTO
Controller --> UI : StaffMemberDTO
UI -> Operator : Display StaffMember data for editing

Operator -> UI : Submit updated StaffMember data
UI -> Controller : UpdateStaffMember(StaffMemberDTO)
Controller -> Controller : Validate basic fields
alt Validation fails
    Controller --> UI : Return ValidationErrorsDTO
    UI --> Operator : Display validation errors
else Validation succeeds
    Controller -> Service : UpdateStaffMember(StaffMemberDTO)
    Service -> Service : Validate business rules (mecanographic number immutable)
    alt Business validation fails
        Service --> Controller : Return Business ValidationErrorsDTO
        Controller --> UI : Return Business ValidationErrorsDTO
        UI --> Operator : Display business errors
    else Business validation succeeds
        Service -> Repository : FindById(id)
        Repository --> Service : StaffMember entity
        Service -> Repository : Save updated StaffMember entity
        Repository --> Service : Updated StaffMember entity
        Service -> Audit : Log update event
        Service --> Controller : Return StaffMemberSuccessDTO
        Controller --> UI : Return StaffMemberSuccessDTO
        UI --> Operator : Display success message
    end
end
@enduml
